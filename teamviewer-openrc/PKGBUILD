# Maintainer: Chris Cromer <chris@cromer.cl>

pkgname=teamviewer-openrc
pkgver=1.0
pkgrel=1
pkgdesc="OpenRC scripts for teamviewer."
arch=('any')
provides=('teamviewer-openrc')
pkgname=('teamviewer-openrc')
depends=('teamviewer' 'openrc')
backup=('etc/conf.d/teamviewer')
url="https://github.com/cromerc/arch-openrc"
license=("GPL2")
source=("teamviewer.init" "teamviewer.conf")
sha256sums=('51468a7439fb1fb1ec27ce8ce0819246faf4fd209dfc08f8bb1bee78569c0b23'
            '5cd8485974ef1c62be8fbe4d92f31a03b616e1a3e46c11bcadef7bdb2c169d8a')

_inst_initd(){
	install -Dm755 teamviewer.init ${pkgdir}/etc/init.d/teamviewer

	sed -e 's|#!/sbin/runscript|#!/usr/bin/openrc-run|' \
		-e 's|/var/run|/run|g' \
		-i ${pkgdir}/etc/init.d/$1
}

_inst_confd(){
	install -Dm755 teamviewer.conf ${pkgdir}/etc/conf.d/teamviewer
}

package_freefall-openrc() {
	pkgdesc="OpenRC scripts for teamviewer."
	depends=('teamviewer' 'openrc')
	backup=('etc/conf.d/teamviewer')
	install=teamviewer-openrc.install

	_inst_confd 'teamviewer'
	_inst_initd 'teamviewer'
}
